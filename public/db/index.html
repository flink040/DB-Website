<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OP Item Datenbank</title>
    <link rel="stylesheet" href="./style.css" />
    <script type="importmap">
      {
        "imports": {
          "@supabase/supabase-js": "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm"
        }
      }
    </script>
  </head>
  <body>
    <header class="page-header">
      <div class="page-header__wrapper">
        <div class="hero-card">
          <div class="hero-card__content">
            <div class="brand">
              <div class="brand__icon" aria-hidden="true">⚔️</div>
              <div class="brand__text">
                <p class="brand__eyebrow">OP Item Datenbank</p>
                <h1 class="brand__title">Finde dein neues Item</h1>
                <p class="brand__lead">
                  Durchsuche die Datenbank, filtere nach Typ und Seltenheit und entdecke dein neues Lieblingsitem.
                </p>
              </div>
            </div>
            <form id="searchForm" class="search" role="search" autocomplete="off">
              <label class="sr-only" for="searchInput">Items durchsuchen</label>
              <span class="search__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle
                    cx="11"
                    cy="11"
                    r="6.25"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.75"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="m20 20-3.75-3.75"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.75"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </span>
              <input
                id="searchInput"
                class="search__input"
                type="search"
                name="q"
                placeholder="Nach Items suchen…"
                aria-label="Items durchsuchen"
                autocomplete="off"
              />
            </form>
          </div>
          <div class="hero-card__aside">
            <div id="authPanel" class="auth-panel" data-auth-state="anonymous" data-auth-menu="closed">
              <p class="auth-panel__label">Login Bereich</p>
              <button
                id="authLoginButton"
                class="auth-panel__action auth-panel__login"
                type="button"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="authMenu"
              >
                <span class="auth-panel__login-icon" aria-hidden="true"></span>
                <span class="auth-panel__login-text">Mit Discord anmelden</span>
              </button>
              <div
                id="authMenu"
                class="auth-panel__menu"
                role="menu"
                aria-labelledby="authLoginButton"
                hidden
              >
                <button
                  id="authProfileButton"
                  class="auth-panel__menu-item auth-panel__menu-item--profile"
                  type="button"
                  role="menuitem"
                >
                  <span class="auth-panel__avatar" id="authUserAvatar">
                    <img id="authUserAvatarImage" alt="" hidden />
                    <span class="auth-panel__avatar-fallback" aria-hidden="true"></span>
                  </span>
                  <span class="auth-panel__menu-copy">
                    <span class="auth-panel__menu-title">Profil</span>
                    <span id="authUserName" class="auth-panel__menu-subtitle"></span>
                  </span>
                  <span class="auth-panel__menu-chevron" aria-hidden="true"></span>
                </button>
                <button
                  id="authLogoutButton"
                  class="auth-panel__menu-item auth-panel__menu-item--logout"
                  type="button"
                  role="menuitem"
                >
                  Logout
                </button>
              </div>
              <p id="authStatus" class="auth-panel__status" aria-live="polite" hidden></p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="page-main">
      <section class="toolbar" aria-label="Filter">
        <form id="filterForm" class="filters" autocomplete="off">
          <label class="filter">
            <span class="filter__label">Item-Typ</span>
            <select id="typeFilter" name="type" data-enhance-select>
              <option value="">Alle Typen</option>
              <option value="helm">Helm</option>
              <option value="brustplatte">Brustplatte</option>
              <option value="hose">Hose</option>
              <option value="schuhe">Schuhe</option>
              <option value="schwert">Schwert</option>
              <option value="axt">Axt</option>
              <option value="streitkolben">Streitkolben</option>
              <option value="dreizack">Dreizack</option>
              <option value="bogen">Bogen</option>
              <option value="armbrust">Armbrust</option>
              <option value="schild">Schild</option>
              <option value="elytra">Elytra</option>
              <option value="schildkroetenpanzer">Schildkrötenpanzer</option>
              <option value="golden-horse-armor">Golden Horse Armor</option>
              <option value="spitzhacke">Spitzhacke</option>
              <option value="hacke">Hacke</option>
              <option value="schaufel">Schaufel</option>
              <option value="angel">Angel</option>
            </select>
          </label>
          <label class="filter">
            <span class="filter__label">Seltenheit</span>
            <select id="rarityFilter" name="rarity" data-enhance-select>
              <option value="">Alle Seltenheiten</option>
              <option value="selten">Selten</option>
              <option value="episch">Episch</option>
              <option value="unbezahlbar">Unbezahlbar</option>
              <option value="legendaer">Legendär</option>
              <option value="jackpot">Jackpot</option>
              <option value="mega-jackpot">Mega Jackpot</option>
            </select>
          </label>
          <label class="filter">
            <span class="filter__label">Sternlevel</span>
            <select id="starsFilter" name="stars" data-enhance-select>
              <option value="">Alle Sterne</option>
              <option value="0">0 Sterne</option>
              <option value="1">1 Stern</option>
              <option value="2">2 Sterne</option>
              <option value="3">3 Sterne</option>
            </select>
          </label>
        </form>
      </section>

      <section
        id="recentSearchSection"
        class="recent-searches"
        aria-label="Letzte Suchanfragen"
        hidden
      >
        <p class="recent-searches__title">Recent Searches</p>
        <div id="recentSearches" class="recent-searches__list" role="list"></div>
      </section>

      <section class="results" aria-label="Suchergebnisse">
        <p id="resultInfo" class="toolbar__info" aria-live="polite"></p>
        <div id="cardGrid" class="card-grid" role="list"></div>
        <button id="loadMoreButton" class="load-more" type="button">Mehr laden</button>
        <button id="addItemButton" class="add-item-button" type="button">Item hinzufügen</button>
      </section>
    </main>

    <div
      id="addItemModal"
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="addItemModalTitle"
      aria-hidden="true"
      hidden
      tabindex="-1"
    >
      <div class="modal__backdrop" data-close-add-item></div>
      <div class="modal__dialog" role="document">
        <button
          id="addItemCloseButton"
          class="modal__close"
          type="button"
          aria-label="Dialog schließen"
          data-close-add-item
        >
          &times;
        </button>
        <h2 id="addItemModalTitle" class="modal__title">Neues Item hinzufügen</h2>
        <form id="addItemForm" class="modal__form" autocomplete="off">
          <div class="modal__field">
            <label for="addItemName">Name</label>
            <input id="addItemName" name="name" type="text" required />
          </div>
          <div class="modal__field">
            <label for="addItemType">Typ</label>
            <select id="addItemType" name="type" required data-enhance-select>
              <option value="">Bitte auswählen</option>
              <option value="helm">Helm</option>
              <option value="brustplatte">Brustplatte</option>
              <option value="hose">Hose</option>
              <option value="schuhe">Schuhe</option>
              <option value="schwert">Schwert</option>
              <option value="axt">Axt</option>
              <option value="streitkolben">Streitkolben</option>
              <option value="dreizack">Dreizack</option>
              <option value="bogen">Bogen</option>
              <option value="armbrust">Armbrust</option>
              <option value="schild">Schild</option>
              <option value="elytra">Elytra</option>
              <option value="schildkroetenpanzer">Schildkrötenpanzer</option>
              <option value="golden-horse-armor">Golden Horse Armor</option>
              <option value="spitzhacke">Spitzhacke</option>
              <option value="hacke">Hacke</option>
              <option value="schaufel">Schaufel</option>
              <option value="angel">Angel</option>
            </select>
          </div>
          <div class="modal__field">
            <label for="addItemRarity">Seltenheit</label>
            <select id="addItemRarity" name="rarity" required data-enhance-select>
              <option value="">Bitte auswählen</option>
              <option value="selten">Selten</option>
              <option value="episch">Episch</option>
              <option value="unbezahlbar">Unbezahlbar</option>
              <option value="legendaer">Legendär</option>
              <option value="jackpot">Jackpot</option>
              <option value="mega-jackpot">Mega Jackpot</option>
            </select>
          </div>
          <div class="modal__field">
            <label for="addItemStars">Sterne (optional)</label>
            <input id="addItemStars" name="stars" type="number" min="0" max="3" step="1" />
          </div>
          <div class="modal__field">
            <label for="addItemImageUrl">Bild-URL (optional)</label>
            <input id="addItemImageUrl" name="image_url" type="url" />
          </div>
          <div class="modal__field">
            <label for="addItemDescription">Beschreibung (optional)</label>
            <textarea id="addItemDescription" name="description" rows="4"></textarea>
          </div>
          <p id="addItemFormStatus" class="modal__status" role="status" aria-live="polite"></p>
          <div class="modal__actions">
            <button id="addItemSubmitButton" class="modal__submit" type="submit">Speichern</button>
            <button
              id="addItemCancelButton"
              class="modal__cancel"
              type="button"
              data-close-add-item
            >
              Abbrechen
            </button>
          </div>
        </form>
      </div>
    </div>

    <aside id="detailView" class="detail-view" aria-hidden="true" hidden>
      <div class="detail-view__backdrop" data-close-detail></div>
      <article class="detail-card" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
        <button class="detail-card__close" type="button" aria-label="Details schließen" data-close-detail>
          &times;
        </button>
        <div class="detail-card__top">
          <figure class="detail-card__media" id="detailMedia">
            <img id="detailImage" alt="" />
            <div class="detail-card__media-fallback" id="detailFallback" aria-hidden="true"></div>
          </figure>
          <header class="detail-card__summary">
            <p class="detail-card__eyebrow" id="detailSubtitle"></p>
            <h2 class="detail-card__title" id="detailTitle">Item</h2>
            <div class="detail-card__stars" id="detailStars" role="img" aria-live="polite"></div>
            <dl class="detail-card__meta">
              <div>
                <dt>Seltenheit</dt>
                <dd id="detailRarity">-</dd>
              </div>
              <div>
                <dt>Veröffentlicht</dt>
                <dd>
                  <span id="detailReleaseRelative">-</span>
                  <span id="detailReleaseAbsolute" class="detail-card__muted"></span>
                </dd>
              </div>
              <div>
                <dt>Typ</dt>
                <dd id="detailType">-</dd>
              </div>
            </dl>
          </header>
        </div>
        <div class="detail-card__body">
          <section class="detail-section" id="detailDescriptionSection" hidden>
            <h3>Beschreibung</h3>
            <p id="detailDescription"></p>
          </section>
          <section class="detail-section" id="detailPropertiesSection">
            <h3>Eigenschaften</h3>
            <dl class="detail-list" id="detailProperties"></dl>
          </section>
          <section class="detail-section" id="detailEnchantmentsSection">
            <h3>Verzauberungen</h3>
            <ul class="detail-enchantments" id="detailEnchantments"></ul>
          </section>
          <p class="detail-status" id="detailStatus" aria-live="polite"></p>
        </div>
      </article>
    </aside>

    <script type="module" src="./app/index.js"></script>
  </body>
</html>
